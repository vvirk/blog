(window.webpackJsonpblog=window.webpackJsonpblog||[]).push([[0],{21:function(e,t,n){e.exports={wrap:"Preloader_wrap__1sVqL",inner:"Preloader_inner__2VW6Y"}},29:function(e,t,n){e.exports=n.p+"static/media/Spinner.315ddeed.svg"},30:function(e,t,n){e.exports={post:"post_post__O9m6l"}},34:function(e,t,n){e.exports=n(47)},46:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(12),o=n.n(c),s=n(2),u=n(10),i=n(27),l=n(33),p=n(28);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var f={isFetching:!1,posts:!1,post:!1,comment:""},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE_IS_FETSHING":return d({},e,{isFetching:t.isFetching});case"ADD_POSTS":return d({},e,{posts:t.posts});case"ADD_POST":return d({},e,{post:t.post});case"ADD_COMMENT_VALUE":return d({},e,{comment:t.commentValue});case"ADD_COMMENT_TO_POST":return d({},e,{post:d({},e.post,{comments:[].concat(Object(l.a)(e.post.comments),[t.comment])})});default:return e}},b=n(5),O=n(8),v=n(14),E=n(15),g=n(17),y=n(16),j=n(18),w=n(21),_=n.n(w),D=n(29),x=n.n(D),P=function(){return a.a.createElement("div",{className:_.a.wrap},a.a.createElement("div",{className:_.a.inner},a.a.createElement("img",{src:x.a,alt:"Spinner"})))},S=n(30),k=n.n(S),T=function(e){var t=e.id,n=e.title,r=e.body,c=e.author,o=e.data;return a.a.createElement("li",{className:k.a.post,key:t},a.a.createElement("p",null,n),a.a.createElement("p",null,r),a.a.createElement("p",null,c),a.a.createElement("p",null,o),a.a.createElement(b.b,{to:"/details/".concat(t)},"read more"))},C=function(e){var t=e.posts;return a.a.createElement("div",null,a.a.createElement(b.b,{to:"/new"},"ADD POST"),a.a.createElement("ul",null,t?t.map(function(e){return a.a.createElement(T,{id:e.id,title:e.title,body:e.body,author:e.author,data:e.data})}):null))},F=n(7),N=n.n(F),A=n(11),I=function(e){return{type:"TOGGLE_IS_FETSHING",isFetching:e}},M=function(e){return{type:"ADD_COMMENT_VALUE",commentValue:e}},V=function(e){return{type:"ADD_COMMENT_TO_POST",comment:e}},G="https://simple-blog-api.crew.red/posts/",L={toggleIsFetching:I},Y=Object(s.b)(function(e){return{isFetching:e.isFetching,posts:e.posts}},L)(C),H=function(e){function t(){return Object(v.a)(this,t),Object(g.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){this.props.getPosts()}},{key:"render",value:function(){var e=this.props.isFetching;return a.a.createElement("div",{className:"blog-wrap"},e?a.a.createElement(P,null):null,a.a.createElement(Y,null))}}]),t}(a.a.Component),J={getPosts:function(){return function(){var e=Object(A.a)(N.a.mark(function e(t){var n,r;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(I(!0)),e.next=4,fetch(G);case 4:return n=e.sent,e.next=7,n.json();case 7:r=e.sent,t({type:"ADD_POSTS",posts:r}),t(I(!1)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}},e,null,[[0,12]])}));return function(t){return e.apply(this,arguments)}}()},toggleIsFetching:I},R=Object(s.b)(function(e){return{isFetching:e.isFetching,posts:e.posts}},J)(H),U=function(e){var t=e.body,n=e.postId,r=e.id;return a.a.createElement("li",{key:r,id:n},t)},W=function(e){var t=e.addCommentValue,n=e.commentValue,r=e.postComment,c=e.match;return a.a.createElement("div",null,a.a.createElement("input",{onChange:function(e){return t(e.target.value)},onKeyUp:function(e){return 13===e.keyCode&&n?r(n,c.params.id):null},value:n}),a.a.createElement("button",{onClick:function(){return r(n,c.params.id)}},"add comment"))},B={addCommentValue:M,postComment:function(e,t){return function(){var n=Object(A.a)(N.a.mark(function n(r){var a,c;return N.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r(M("")),a={postId:+t,body:e},n.next=5,fetch("https://simple-blog-api.crew.red/comments",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}});case 5:return c=n.sent,n.next=8,c.json();case 8:r(V(a)),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),console.log(n.t0);case 14:case"end":return n.stop()}},n,null,[[0,11]])}));return function(e){return n.apply(this,arguments)}}()}},q=Object(O.e)(Object(s.b)(function(e){return{commentValue:e.comment}},B)(W)),K=function(e){function t(){return Object(v.a)(this,t),Object(g.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){this.props.getPost(this.props.match.params.id)}},{key:"render",value:function(){var e=this.props,t=e.isFetching,n=e.post;return console.log(n),a.a.createElement("div",{className:"wrap"},t?a.a.createElement(P,null):null,a.a.createElement("h2",null,n.title),a.a.createElement("p",null,n.body),a.a.createElement("p",null,n.author),a.a.createElement("p",null,n.date),a.a.createElement("p",null,"comments:"),a.a.createElement(q,null),a.a.createElement("ul",null,n.comments?n.comments.map(function(e){return a.a.createElement(U,{body:e.body,postId:e.postId,id:e.id})}):null))}}]),t}(a.a.Component),$={toggleIsFetching:I,getPost:function(e){return function(){var t=Object(A.a)(N.a.mark(function t(n){var r,a,c;return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(I(!0)),r="".concat(G).concat(e,"?_embed=comments"),t.next=5,fetch(r);case 5:return a=t.sent,t.next=8,a.json();case 8:c=t.sent,n({type:"ADD_POST",post:c}),n(I(!1)),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),console.log(t.t0);case 16:case"end":return t.stop()}},t,null,[[0,13]])}));return function(e){return t.apply(this,arguments)}}()}},z=Object(O.e)(Object(s.b)(function(e){return{isFetching:e.isFetching,post:e.post}},$)(K)),Q=n(32),X=function(e){var t=e.addNewPost,n=e.posts,c=Object(r.useRef)(),o=Object(r.useRef)(),s=Object(r.useRef)(),u=n[n.length-1].id+1;return a.a.createElement("div",null,a.a.createElement("h2",null,"Create new post"),a.a.createElement("input",{type:"text",placeholder:"author",ref:c}),a.a.createElement("input",{type:"text",placeholder:"title",ref:o}),a.a.createElement("textarea",{placeholder:"post body",ref:s}),a.a.createElement("button",{onClick:function(){return t(u,c.current.value,o.current.value,s.current.value,Q().format("YYYY-MM-D HH:mm:ss"))}},"ADD POST"))},Z={addNewPost:function(e,t,n,r,a){return function(){var c=Object(A.a)(N.a.mark(function c(o){var s,u;return N.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,s={title:n,body:r,id:+e,author:t,date:a},c.next=4,fetch(G,{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json"}});case 4:return u=c.sent,c.next=7,u.json();case 7:c.next=12;break;case 9:c.prev=9,c.t0=c.catch(0),console.log(c.t0);case 12:case"end":return c.stop()}},c,null,[[0,9]])}));return function(e){return c.apply(this,arguments)}}()}},ee=Object(O.e)(Object(s.b)(function(e){return{posts:e.posts}},Z)(X)),te=function(){return a.a.createElement(b.a,null,a.a.createElement(O.a,{path:"/",exact:!0,component:R}),a.a.createElement(O.a,{path:"/new",exact:!0,component:ee}),a.a.createElement(O.a,{path:"/details/:id",exact:!0,component:z}))};n(46);var ne=function(){return a.a.createElement("div",{className:"App"},a.a.createElement(te,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function re(){return Object(u.c)(h,f,Object(u.a)(i.a))}n.d(t,"configureStore",function(){return re}),n.d(t,"store",function(){return ae});var ae=re();o.a.render(a.a.createElement(s.a,{store:ae},a.a.createElement(ne,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[34,1,2]]]);
//# sourceMappingURL=main.545cc3e0.chunk.js.map